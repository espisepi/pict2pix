var pict2pix;(()=>{"use strict";var t={d:(e,a)=>{for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{animate:()=>l});class a{static mappedImage;static maxWidth;static maxHeight;static horizontalSpeed;static verticalSpeed;constructor(){}update(t){}draw(t){}}class i extends a{constructor(){super(),this.x=Math.random()*a.maxWidth,this.y=Math.random()*a.maxHeight,this.speed=0,this.size=2*Math.random()+.2,this.color}update(t){let e=Math.floor(this.y),i=Math.floor(this.x);e>=0&&e<a.maxHeight&&i>=0&&i<a.maxWidth&&(this.speed=a.mappedImage[e][i][0],this.color=a.mappedImage[e][i][1]),this.y+=(3-this.speed)*t*.03*a.verticalSpeed,this.x+=(3-this.speed)*t*.03*a.horizontalSpeed,this.y>=a.maxHeight&&a.verticalSpeed>0&&(this.y=0,this.x=Math.random()*a.maxWidth),this.y<0&&a.verticalSpeed<0&&(this.y=a.maxHeight-1,this.x=Math.random()*a.maxWidth),this.x>=a.maxWidth&&a.horizontalSpeed>0&&(this.x=0,this.y=Math.random()*a.maxHeight),this.x<0&&a.horizontalSpeed<0&&(this.x=a.maxWidth-1,this.y=Math.random()*a.maxHeight)}draw(t){t.beginPath(),t.globalAlpha=1,t.fillStyle=this.color,t.strokeStyle=this.color,t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fill()}}class s extends i{#angle=0;update(t){super.update(t),this.#angle+=this.speed/20,this.y+=Math.sin(this.#angle),this.x+=Math.cos(this.#angle)}}class h{#particles;constructor(){this.#particles={"straight-particle":t=>new i,"twisted-particle":t=>new s}}createParticle(t,e){return this.#particles[t]?.(e)??new i}}class r{#canvas;#ctx;#lastTime=0;#deltaTime=0;#particlesArray=[];#numberOfParticles=3e3;#mappedImage=[];constructor(t){this.#numberOfParticles=t.numberOfParticles||3e3,this.#canvas=document.createElement("canvas"),this.#canvas.width=t.image.width||t.image.naturalWidth,this.#canvas.height=t.image.height||t.image.naturalHeight,t.image.replaceWith(this.#canvas),this.#ctx=this.#canvas.getContext("2d"),this.#ctx.drawImage(t.image,0,0,this.#canvas.width,this.#canvas.height);const e=this.#ctx.getImageData(0,0,this.#canvas.width,this.#canvas.height);this.#ctx.clearRect(0,0,this.#canvas.width,this.#canvas.height),this.mapImage(e),requestAnimationFrame(this.loop.bind(this)),a.mappedImage=this.#mappedImage,a.maxWidth=this.#canvas.width,a.maxHeight=this.#canvas.height,a.verticalSpeed=t.verticalSpeed??1,a.horizontalSpeed=t.horizontalSpeed??1;const i=new h;for(let e=0;e<this.#numberOfParticles;e++)this.#particlesArray.push(i.createParticle(t.particleType??"straight-particle"))}mapImage(t){let e=654654,a=-654654;for(let i=0;i<this.#canvas.height;i++){let s=[];for(let h=0;h<this.#canvas.width;h++){const r=t.data[4*i*t.width+4*h],l=t.data[4*i*t.width+(4*h+1)],c=t.data[4*i*t.width+(4*h+2)],n=this.calculateRelativeBrightness(r,l,c);n<e&&(e=n),n>a&&(a=n);const d=[n,"rgb("+r+","+l+","+c+")"];s.push(d)}this.#mappedImage.push(s)}}calculateRelativeBrightness(t,e,a){return Math.sqrt(t*t*.299+e*e*.587+a*a*.114)/100}update(t){for(let e=0;e<this.#particlesArray.length;e++)this.#particlesArray[e].update(t)}draw(){this.#ctx.globalAlpha=.01,this.#ctx.fillStyle="rgb(0, 0, 0)",this.#ctx.fillRect(0,0,this.#canvas.width,this.#canvas.height);for(let t=0;t<this.#particlesArray.length;t++)this.#particlesArray[t].draw(this.#ctx)}loop(t){this.#deltaTime=t-this.#lastTime,this.#lastTime=t,this.update(this.#deltaTime),this.draw(),requestAnimationFrame(this.loop.bind(this))}}function l(t){return new r(t)}pict2pix=e})();